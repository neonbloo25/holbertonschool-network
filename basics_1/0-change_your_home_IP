#!/usr/bin/env bash
# This script updates /etc/hosts to map localhost to 127.0.0.2 and facebook.com to 8.8.8.8

HOSTS_FILE="/etc/hosts"
TMP_FILE="/tmp/hosts.tmp"

# Backup original file
sudo cp "$HOSTS_FILE" "$HOSTS_FILE.bak"

# Filter out any existing localhost or facebook.com lines
sudo grep -vE '\slocalhost\b|\sfacebook\.com\b' "$HOSTS_FILE" > "$TMP_FILE"

# Append new mappings
echo "127.0.0.2 localhost" | sudo tee -a "$TMP_FILE" > /dev/null
echo "8.8.8.8 facebook.com" | sudo tee -a "$TMP_FILE" > /dev/null

# Overwrite the original /etc/hosts file
sudo cp "$TMP_FILE" "$HOSTS_FILE"

# Clean up
rm -f "$TMP_FILE"
